# 智能汽车

# 系统架构

智能网联汽车系统架构总共划分为上下四层，软件和硬件两层是“车端”的系统架构，包含自动驾驶、车联网、智能座舱等系统，平台和服务两层是“云端”的系统架构，包含了基础云平台和云服务，参考架构具备软硬分离、软件定义的特点。

![智能网联结构](https://assets.ng-tech.icu/superbed/2021/07/26/60fe35f15132923bf8b354f8.jpg)

## 硬件层

按照传统汽车行业的分工模式，主机厂负责整车设计集成和核心零部件设计研发，供应商负责其他零部件设计研发，并通过硬件接口与整车集成。这种由整车厂定义硬件接口和集成方案的方式，必然造成一辆汽车内有很多算力有限的 ECU，分别负责每个零部件的控制逻辑。由于成本控制的原因，每个供应商都尽可能“量入为出”，限制硬件算力和系统规模，最终导致汽车内部的“烟囱”式系统格局，单一的产品功能升级，可能涉及多个供应商系统变更，汽车制造商无法按照 IT 行业习惯的软件定义方式灵活演进。

作为造车新势力的代表，特斯拉第一次打破常规，重新定义了游戏规则，Model 3 的整个 EEA（电子电气架构）只有三大控制模块：CCM（中央计算模块）、BCMLH（左车身控制模块）、BCMRH（右车身控制模块）。大算力的中央计算模块，基于软硬分离的架构，融合驾驶辅助系统（DAS）、信息娱乐系统（IVI）、外部连接和车内通信系统，结合 FOTA（远程软件更新）能力，支持自动驾驶和车内娱乐功能的持续升级。Model 3 的用户可以像智能手机用户那样，付费下载、订阅多种服务，例如：高级辅助驾驶服务（ADAS）、音乐服务等。

特斯拉是汽车行业第一个“吃螃蟹”的品牌，2012 年特斯拉在 Model S 上首次实现整车 OTA，迄今为止特斯拉已经进行了上百次 OTA，周期性的软件升级，让用户享受到了智能手机的用户体验，持续不断地获得驾驶新车的感觉。

2020 年 9 月，特斯拉官方网站通知，Model 3 的车主支付 2400 元后，可以通过 FOTA 升级，开通后排座椅加热功能。这种预装足够算力的标准硬件，配合售后软件激活的方式，不但通过减少零部件种类降低了生产采购成本，而且为售后激活服务，收取用户订阅费埋下伏笔，真正实现了“软件挣钱”，而很多传统车厂受制于电子电器架构、车内硬件算力和软件系统能力，至今无法像特斯拉那样持续为车主提供软件升级服务，赚取用户的售后利润。

随着汽车智能化功能越来越多，如何平衡算力需求和芯片成本已经成为汽车产品规划的重要课题。在智能手机行业，如苹果、华为等头部手机厂商，都选择了自研芯片以保持市场竞争优势，但由于汽车行业无法达到消费电子行业的市场规模，自研芯片的风险较大，因此大部分整车厂选择和技术赋能者合作，共同解决车载算力的问题。

不过和其他竞争对手相反，特斯拉选择自主研发芯片。在 HW2.5 时代，特斯拉 Autopilot 系统的计算平台还在使用英伟达的 Drive PX2，而到 HW3.0 时代，Autopilot 系统已经开始搭载特斯拉自研的 FSD 芯片，每秒 2300 帧的图像处理能力是 HW2.5 的 21 倍，计算能力也提升了大约 7 倍，能耗只有 HW2.5 的 1.25 倍，HW3.0 强大的性能为特斯拉的自动驾驶系统带来了巨大的技术优势。

无论采取自研，还是合作的方式，汽车企业正在向智能手机厂商学习，引入车载计算平台，为软件定义汽车提供算力保障。Wintel 联盟（Windows 和 Intel）和 AA 联盟（ARM 和 Android）分别定义了 PC 和智能手机的行业生态，那么在智能网联汽车的时代，将会出现怎样的联盟，让我们拭目以待。

![OTA 系统参考架构](https://assets.ng-tech.icu/superbed/2021/07/26/60fe36455132923bf8b41eff.jpg)

除了计算芯片，还有很多新的硬件技术正在不断投入汽车行业应用，例如：车内以太网、柔性电路板等，本文就不再赘述了。

## 软件层

传统汽车的每个电子零部件都有自己的 ECU、（嵌入式）操作系统和应用系统，整车厂通过传统的电子电器架构和车载网络（CAN、LIN 等）集成几十个 ECU，实现整车控制逻辑。以车身控制为例，横向控制系统（转向）、纵向控制器系统（加速/制动）、垂直控制系统（悬架）分别由不同供应商提供，一项车身控制的功能变更就可能涉及多家零部件供应商的 ECU、操作系统和应用系统，整车厂很难像智能手机厂那样通过软件快速迭代产品功能。

在智能网联汽车架构中，硬件层统一的 ECU（例如：特斯拉的中央控制器）提供集中算力，软件层的各个控制器软件模块（例如：自动驾驶、智能座舱等）的软件在统一的底层操作系统环境中协同运行，实现智能网联汽车的各种控制逻辑，整车厂可以通过 FOTA 远程更新软件层的控制模块，持续更新迭代整车功能。这种“软件定义一切”的模式是所有汽车企业的梦想。

注：软件层仅仅描述了智能网联汽车软件架构的应用架构（通常软件架构包括应用架构、数据架构、技术架构等，为了简化技术细节，已省略技术架构和数据架构），需要说明的是，支持应用架构的底层“技术架构”（包含底层操作系统和中间件）是软件定义汽车的重要基础。

统一的底层操作系统、中间件和上层的功能模块共同构成了智能网联汽车的全新软件架构，新的架构给车企带来好处的同时，也给车企带来了多种困难。先进的自动驾驶算法和车载软件架构决定了汽车智能化能力，汽车企业需要基于人工智能、软件架构技术自主掌控一个标准的车载软件平台，并基于这个平台，持续集成和交付新的功能，持续升级智能汽车产品，获得竞争优势。

## 平台层

车辆连接到云端，“持续在线”为整车厂数字化转型提供了连接基础，同时也给整车厂云平台技术能力提出了新的要求。传统车厂的 IT 部门通常采购商业化 IT 技术方案，例如 VMWare、Oracle 等，用于企业内部信息系统建设。面对全新的车联网、互联网应用，传统车厂 IT 部门面临大规模、高并发、分布式的业务需求挑战。

越来越多的整车厂 IT 部门尝试基于开源社区，建立云原生技术框架（参见图 4），或者直接使用公有云，满足新业务需求。从基于物理机、虚拟机的单体架构到基于容器的微服务架构，从商业化的 Oracle 数据库到开源的 MySQL、NoSQL，从紧耦合的应用集成方案到基于异步消息、API 的松耦合应用网关，从瀑布式开发到敏捷迭代的 DevOps 流水线，云原生技术中台在汽车行业信息化领域应运而生。

![云原生技术框架](https://assets.ng-tech.icu/superbed/2021/07/26/60fe36ad5132923bf8b515c4.jpg)

仅仅建立云原生架构的计算平台，不足以赋能业务数字化转型，数据才是数字化转型的核心和基础，为了贯穿车辆数据采集、储存、分析和变现的全流程，整车厂需要建立大数据平台和数据处理能力，才能完成业务建模、数据采集、模型训练、持续升级等关键任务，真正实现汽车产品数字化。

总结来说，基于云原生架构的技术中台和基于大数据、人工智能的数据中台是汽车行业数字化必不可少的技术基础，在此基础上建立的各种云服务平台将成为汽车行业数字化的“云端操作系统”。

## 服务层

云服务是汽车行业数字化闭环的关键，平台层的所有模块最终需要依靠 SaaS 服务变现。在车联网发展初期，车企通过品牌 App，为用户提供远程车控、FOTA、车辆监控等云服务（SaaS）；随着车联网的普及，云服务的范围逐步延伸到汽车后市场领域，主要涉及远程诊断、预约维修、紧急救援等云服务（SaaS）；未来，基于车联网的位置服务（LBS），车企将有机会进入移动出行领域，为用户提供餐饮、住宿、娱乐、休闲等全场景的泛出行服务。

参考智能手机行业发展趋势，汽车行业的盈利模式也可能发生类似的变化：车企不再单纯依赖一次性的整车销售收入，相反，车企可以在汽车产品全生命周期内，通过云服务（SaaS）的形式，为用户提供增值服务，获取持续的“云端”收益。

![产品经理/产品运营机制](https://assets.ng-tech.icu/superbed/2021/07/26/60fe36e65132923bf8b59e38.jpg)

为了获取云服务（SaaS）的增值收益，真正实现数字化转型，传统车厂需要向互联网行业学习，以用户为中心，关注用户体验，建立由“产品经理”负责的云服务开发和运营机制，贯穿从产品构想到产品运营的全生命周期。

总体而言，汽车行业必须建立一个“端云一体”的系统架构，强化芯片、软件、人工智能、车联网、SaaS 服务等技术能力，创新产品开发和运营机制，这样才能像消费电子行业那样，以智能网联汽车为载体，获取数字化红利，实现汽车产品和服务的数字化转型。
