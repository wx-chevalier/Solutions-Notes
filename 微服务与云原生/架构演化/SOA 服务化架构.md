# SOA 与服务化架构

# 系统扩展

![](https://i.postimg.cc/3Rqf3CBz/image.png)

上图从三个维度概括了一个系统的扩展过程，x 轴即水平复制，即在负载均衡服务器后增加多个 web 服务器。z 轴是对数据库的扩展，即分库分表(分库是将关系紧密的表放在一台数据库服务器上，分表是因为一张表的数据太多，需要将一张表的数据通过 hash 放在不同的数据库服务器上)。y 轴是业务方向的扩展，才能将巨型应用分解为一组不同的服务，例如订单管理中心、客户信息管理中心、商品管理中心等等。

2002 年左右，亚马逊 CEO 贝佐斯就在亚马逊内部强制推行了以下六项原则：

- 所有团队开发的程序模块都要通过 Service 接口将数据与功能开放出来。
- 团队间程序模块的信息通信都要通过上述接口。
- 除上述通信方式外，其他方式一概不允许使用：不能直接连接程序，不能直接读取其他团队的数据库，不能使用共享内存模式，不能使用他人模块的内部入口等。
- 任何技术都可以使用，比如 HTTP、Corba、发布/订阅、自定义的网络协议等。
- 所有的 Service 接口，毫无例外，都必须从骨子里到表面上被设计成能对外界开放的。也就是说，团队必须做好规划与设计，以便未来把接口开放给全世界的程序员。
- 不按照以上要求做的人会被炒鱿鱼。
